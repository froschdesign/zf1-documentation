<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
    Searching an Index - Zend_Search_Lucene &ndash; Documentation of ZF1 - Zend Framework
</title>
    <link rel="stylesheet" href="https://froschdesign.github.io/zend-documentation-showcase/css/styles.css">
    <link rel="stylesheet" href="/css/main.css">
</head>
<body id="page-top">
<div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="https://docs.zendframework.com/tutorials/img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<header class="header">
    <div class="container">
        <div class="row">
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation
                    <small class="header__subtitle">ZF1</small>
                </h1>
            </div>
        </div>
    </div>
</header>
<div class="container">
    <div class="row">
        
    
<div class="col-md-9 col-xs-12 content" role="main"><p class="alert alert-warning" role="alert">
    <strong>Caution:</strong> The documentation you are viewing is
    for an older version of Zend Framework.<br>
    You can find the documentation of the current version at:
    <br>
    <a href="https://docs.zendframework.com/">
        https://docs.zendframework.com/    </a>
</p>
            <div id="zend.search.lucene.searching" class="section">
                <div class="info">
                    <h1 class="title">
                        Searching an Index
                    </h1>
                </div>
                <div class="section" id="zend.search.lucene.searching.query_building">
                    <div class="info">
                        <h2>
                            Building Queries
                        </h2>
                    </div>
                    <p class="para">
                        There are two ways to search the index. The first method uses query parser to construct a query from a string. The second is to programmatically create your own queries through the <span class="classname">Zend_Search_Lucene</span> <acronym class="acronym">API</acronym>.
                    </p>
                    <p class="para">
                        Before choosing to use the provided query parser, please consider the following:
                    </p>
                    <ol type="1">
                        <li class="listitem">
                            <p class="para">
                                If you are programmatically creating a query string and then parsing it with the query parser then you should consider building your queries directly with the query <acronym class="acronym">API</acronym>. Generally speaking, the query parser is designed for human-entered text, not for program-generated text.
                            </p>
                        </li>
                        <li class="listitem">
                            <p class="para">
                                Untokenized fields are best added directly to queries and not through the query parser. If a field's values are generated programmatically by the application, then the query clauses for this field should also be constructed programmatically. An analyzer, which the query parser uses, is designed to convert human-entered text to terms. Program-generated values, like dates, keywords, etc., should be added with the query <acronym class="acronym">API</acronym>.
                            </p>
                        </li>
                        <li class="listitem">
                            <p class="para">
                                In a query form, fields that are general text should use the query parser. All others, such as date ranges, keywords, etc., are better added directly through the query <acronym class="acronym">API</acronym>. A field with a limited set of values that can be specified with a pull-down menu should not be added to a query string that is subsequently parsed but instead should be added as a TermQuery clause.
                            </p>
                        </li>
                        <li class="listitem">
                            <p class="para">
                                Boolean queries allow the programmer to logically combine two or more queries into new one. Thus it's the best way to add additional criteria to a search defined by a query string.
                            </p>
                        </li>
                    </ol>
                    <p class="para">
                        Both ways use the same <acronym class="acronym">API</acronym> method to search through the index:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span> = Zend_Search_Lucene::<span style="color: #006600;">open</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'/data/my_index'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        You can also search multiple indexes simultaneously using MultiSearcher, which operates using the same <acronym class="acronym">API</acronym> as searching on a single index:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$multi</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Search_Lucene_MultiSearcher<span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$multi</span>-&gt;<span style="color: #006600;">addIndex</span><span style="color: #66cc66;">(</span>Zend_Search_Lucene::<span style="color: #006600;">open</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'/data/my_index_one'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$multi</span>-&gt;<span style="color: #006600;">addIndex</span><span style="color: #66cc66;">(</span>Zend_Search_Lucene::<span style="color: #006600;">open</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'/data/my_index_two'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$multi</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        The <span class="methodname">Zend_Search_Lucene::find()</span> method determines the input type automatically and uses the query parser to construct an appropriate <span class="classname">Zend_Search_Lucene_Search_Query</span> object from an input of type string.
                    </p>
                    <p class="para">
                        It is important to note that the query parser uses the standard analyzer to tokenize separate parts of query string. Thus all transformations which are applied to indexed text are also applied to query strings.
                    </p>
                    <p class="para">
                        The standard analyzer may transform the query string to lower case for case-insensitivity, remove stop-words, and stem among other transformations.
                    </p>
                    <p class="para">
                        The <acronym class="acronym">API</acronym> method doesn't transform or filter input terms in any way. It's therefore more suitable for computer generated or untokenized fields.
                    </p>
                    <div class="section" id="zend.search.lucene.searching.query_building.parsing">
                        <div class="info">
                            <h2>
                                Query Parsing
                            </h2>
                        </div>
                        <p class="para">
                            <span class="methodname">Zend_Search_Lucene_Search_QueryParser::parse()</span> method may be used to parse query strings into query objects.
                        </p>
                        <p class="para">
                            This query object may be used in query construction <acronym class="acronym">API</acronym> methods to combine user entered queries with programmatically generated queries.
                        </p>
                        <p class="para">
                            Actually, in some cases it's the only way to search for values within untokenized fields:
                        </p>
                        <div class="programlisting php">
                            <div class="phpcode">
                                <div class="php" style="font-family: monospace;">
                                    <ol>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$userQuery</span> = Zend_Search_Lucene_Search_QueryParser::<span style="color: #006600;">parse</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$queryStr</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                &nbsp;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$pathTerm</span>&nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Zend_Search_Lucene_Index_Term<span style="color: #66cc66;">(</span>
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'/data/doc_dir/'</span> . <span style="color: #0000ff;">$filename</span>, <span style="color: #ff0000;">'path'</span>
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$pathQuery</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Search_Lucene_Search_Query_Term<span style="color: #66cc66;">(</span><span style="color: #0000ff;">$pathTerm</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                &nbsp;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$query</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Search_Lucene_Search_Query_Boolean<span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">addSubquery</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$userQuery</span>, <span style="color: #000000; font-weight: bold;">true</span> <span style="color: #808080; font-style: italic;">/* required */</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">addSubquery</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$pathQuery</span>, <span style="color: #000000; font-weight: bold;">true</span> <span style="color: #808080; font-style: italic;">/* required */</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                &nbsp;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$hits</span> = <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <p class="para">
                            <span class="methodname">Zend_Search_Lucene_Search_QueryParser::parse()</span> method also takes an optional encoding parameter, which can specify query string encoding:
                        </p>
                        <div class="programlisting php">
                            <div class="phpcode">
                                <div class="php" style="font-family: monospace;">
                                    <ol>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$userQuery</span> = Zend_Search_Lucene_Search_QueryParser::<span style="color: #006600;">parse</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$queryStr</span>,
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'iso-8859-5'</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <p class="para">
                            If the encoding parameter is omitted, then current locale is used.
                        </p>
                        <p class="para">
                            It's also possible to specify the default query string encoding with <span class="methodname">Zend_Search_Lucene_Search_QueryParser::setDefaultEncoding()</span> method:
                        </p>
                        <div class="programlisting php">
                            <div class="phpcode">
                                <div class="php" style="font-family: monospace;">
                                    <ol>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                Zend_Search_Lucene_Search_QueryParser::<span style="color: #006600;">setDefaultEncoding</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'iso-8859-5'</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                ...
                                            </div>
                                        </li>
                                        <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                            <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                                <span style="color: #0000ff;">$userQuery</span> = Zend_Search_Lucene_Search_QueryParser::<span style="color: #006600;">parse</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$queryStr</span><span style="color: #66cc66;">)</span>;
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <p class="para">
                            <span class="methodname">Zend_Search_Lucene_Search_QueryParser::getDefaultEncoding()</span> returns the current default query string encoding (the empty string means "current locale").
                        </p>
                    </div>
                </div>
                <div class="section" id="zend.search.lucene.searching.results">
                    <div class="info">
                        <h2>
                            Search Results
                        </h2>
                    </div>
                    <p class="para">
                        The search result is an array of <span class="classname">Zend_Search_Lucene_Search_QueryHit</span> objects. Each of these has two properties: <code class="code">$hit-&gt;id</code> is a document number within the index and <code class="code">$hit-&gt;score</code> is a score of the hit in a search result. The results are ordered by score (descending from highest score).
                    </p>
                    <p class="para">
                        The <span class="classname">Zend_Search_Lucene_Search_QueryHit</span> object also exposes each field of the <span class="classname">Zend_Search_Lucene_Document</span> found in the search as a property of the hit. In the following example, a hit is returned with two fields from the corresponding document: title and author.
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span> = Zend_Search_Lucene::<span style="color: #006600;">open</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'/data/my_index'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$hits</span> = <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">(</span><span style="color: #0000ff;">$hits</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$hit</span><span style="color: #66cc66;">)</span> <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$hit</span>-&gt;<span style="color: #006600;">score</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$hit</span>-&gt;<span style="color: #006600;">title</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$hit</span>-&gt;<span style="color: #006600;">author</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        Stored fields are always returned in UTF-8 encoding.
                    </p>
                    <p class="para">
                        Optionally, the original <span class="classname">Zend_Search_Lucene_Document</span> object can be returned from the <span class="classname">Zend_Search_Lucene_Search_QueryHit</span>. You can retrieve stored parts of the document by using the <span class="methodname">getDocument()</span> method of the index object and then get them by <span class="methodname">getFieldValue()</span> method:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span> = Zend_Search_Lucene::<span style="color: #006600;">open</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'/data/my_index'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$hits</span> = <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">(</span><span style="color: #0000ff;">$hits</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$hit</span><span style="color: #66cc66;">)</span> <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// return Zend_Search_Lucene_Document object for this hit</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$document</span> = <span style="color: #0000ff;">$hit</span>-&gt;<span style="color: #006600;">getDocument</span><span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// return a Zend_Search_Lucene_Field object</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// from the Zend_Search_Lucene_Document</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$document</span>-&gt;<span style="color: #006600;">getField</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'title'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// return the string value of the Zend_Search_Lucene_Field object</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$document</span>-&gt;<span style="color: #006600;">getFieldValue</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'title'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// same as getFieldValue()</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$document</span>-&gt;<span style="color: #006600;">title</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        The fields available from the <span class="classname">Zend_Search_Lucene_Document</span> object are determined at the time of indexing. The document fields are either indexed, or index and stored, in the document by the indexing application (e.g. LuceneIndexCreation.jar).
                    </p>
                    <p class="para">
                        Note that the document identity ('path' in our example) is also stored in the index and must be retrieved from it.
                    </p>
                </div>
                <div class="section" id="zend.search.lucene.searching.results-limiting">
                    <div class="info">
                        <h2>
                            Limiting the Result Set
                        </h2>
                    </div>
                    <p class="para">
                        The most computationally expensive part of searching is score calculation. It may take several seconds for large result sets (tens of thousands of hits).
                    </p>
                    <p class="para">
                        <span class="classname">Zend_Search_Lucene</span> gives the possibility to limit result set size with <span class="methodname">getResultSetLimit()</span> and <span class="methodname">setResultSetLimit()</span> methods:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$currentResultSetLimit</span> = Zend_Search_Lucene::<span style="color: #006600;">getResultSetLimit</span><span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            Zend_Search_Lucene::<span style="color: #006600;">setResultSetLimit</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$newLimit</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        The default value of 0 means 'no limit'.
                    </p>
                    <p class="para">
                        It doesn't give the 'best N' results, but only the 'first N' <a href="#fnid1" name="fn1"><sup>[1]</sup></a> .
                    </p>
                </div>
                <div class="section" id="zend.search.lucene.searching.results-scoring">
                    <div class="info">
                        <h2>
                            Results Scoring
                        </h2>
                    </div>
                    <p class="para">
                        <span class="classname">Zend_Search_Lucene</span> uses the same scoring algorithms as Java Lucene. All hits in the search result are ordered by score by default. Hits with greater score come first, and documents having higher scores should match the query more precisely than documents having lower scores.
                    </p>
                    <p class="para">
                        Roughly speaking, search hits that contain the searched term or phrase more frequently will have a higher score.
                    </p>
                    <p class="para">
                        A hit's score can be retrieved by accessing the <code class="code">score</code> property of the hit:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$hits</span> = <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #b1b100;">foreach</span> <span style="color: #66cc66;">(</span><span style="color: #0000ff;">$hits</span> <span style="color: #b1b100;">as</span> <span style="color: #0000ff;">$hit</span><span style="color: #66cc66;">)</span> <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$hit</span>-&gt;<span style="color: #006600;">id</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$hit</span>-&gt;<span style="color: #006600;">score</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        The <span class="classname">Zend_Search_Lucene_Search_Similarity</span> class is used to calculate the score for each hit. See <a href="zend.search.lucene.extending.html#zend.search.lucene.extending.scoring" class="link">Extensibility. Scoring Algorithms</a> section for details.
                    </p>
                </div>
                <div class="section" id="zend.search.lucene.searching.sorting">
                    <div class="info">
                        <h2>
                            Search Result Sorting
                        </h2>
                    </div>
                    <p class="para">
                        By default, the search results are ordered by score. The programmer can change this behavior by setting a sort field (or a list of fields), sort type and sort order parameters.
                    </p>
                    <p class="para">
                        <code class="code">$index-&gt;find()</code> call may take several optional parameters:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span> <span style="color: #66cc66;">[</span>, <span style="color: #0000ff;">$sortField</span> <span style="color: #66cc66;">[</span>, <span style="color: #0000ff;">$sortType</span> <span style="color: #66cc66;">[</span>, <span style="color: #0000ff;">$sortOrder</span><span style="color: #66cc66;">]</span><span style="color: #66cc66;">]</span><span style="color: #66cc66;">]</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">[</span>, <span style="color: #0000ff;">$sortField2</span> <span style="color: #66cc66;">[</span>, <span style="color: #0000ff;">$sortType</span> <span style="color: #66cc66;">[</span>, <span style="color: #0000ff;">$sortOrder</span><span style="color: #66cc66;">]</span><span style="color: #66cc66;">]</span><span style="color: #66cc66;">]</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;...<span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        A name of stored field by which to sort result should be passed as the <var class="varname">$sortField</var> parameter.
                    </p>
                    <p class="para">
                        <var class="varname">$sortType</var> may be omitted or take the following enumerated values: <b><tt>SORT_REGULAR</tt></b> (compare items normally- default value), <b><tt>SORT_NUMERIC</tt></b> (compare items numerically), <b><tt>SORT_STRING</tt></b> (compare items as strings).
                    </p>
                    <p class="para">
                        <var class="varname">$sortOrder</var> may be omitted or take the following enumerated values: <b><tt>SORT_ASC</tt></b> (sort in ascending order- default value), <b><tt>SORT_DESC</tt></b> (sort in descending order).
                    </p>
                    <p class="para">
                        Examples:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span>, <span style="color: #ff0000;">'quantity'</span>, SORT_NUMERIC, SORT_DESC<span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span>, <span style="color: #ff0000;">'fname'</span>, SORT_STRING, <span style="color: #ff0000;">'lname'</span>, SORT_STRING<span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$index</span>-&gt;<span style="color: #006600;">find</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$query</span>, <span style="color: #ff0000;">'name'</span>, SORT_STRING, <span style="color: #ff0000;">'quantity'</span>, SORT_NUMERIC, SORT_DESC<span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        Please use caution when using a non-default search order; the query needs to retrieve documents completely from an index, which may dramatically reduce search performance.
                    </p>
                </div>
                <div class="section" id="zend.search.lucene.searching.highlighting">
                    <div class="info">
                        <h2>
                            Search Results Highlighting
                        </h2>
                    </div>
                    <p class="para">
                        <span class="classname">Zend_Search_Lucene</span> provides two options for search results highlighting.
                    </p>
                    <p class="para">
                        The first one is utilizing <span class="classname">Zend_Search_Lucene_Document_Html</span> class (see <a href="zend.search.lucene.overview.html#zend.search.lucene.index-creation.html-documents" class="link">HTML documents section</a> for details) using the following methods:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">/**</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* Highlight text with specified color</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">*</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @param string|array $words</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @param string $colour</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @return string</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">*/</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> highlight<span style="color: #66cc66;">(</span><span style="color: #0000ff;">$words</span>, <span style="color: #0000ff;">$colour</span> = <span style="color: #ff0000;">'#66ffff'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">/**</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* Highlight text using specified View helper or callback function.</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">*</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @param string|array $words&nbsp; Words to highlight. Words could be organized</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;using the array or string.</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @param callback $callback&nbsp; &nbsp;Callback method, used to transform</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(highlighting) text.</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @param array&nbsp; &nbsp; $params&nbsp; &nbsp; &nbsp;Array of additionall callback parameters passed</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;through into it (first non-optional parameter</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;is an HTML fragment for highlighting)</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @return string</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">* @throws Zend_Search_Lucene_Exception</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">*/</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> highlightExtended<span style="color: #66cc66;">(</span><span style="color: #0000ff;">$words</span>, <span style="color: #0000ff;">$callback</span>, <span style="color: #0000ff;">$params</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span><span style="color: #66cc66;">)</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        To customize highlighting behavior use <span class="methodname">highlightExtended()</span> method with specified callback, which takes one or more parameters <a href="#fnid2" name="fn2"><sup>[2]</sup></a> <acronym class="acronym">HTML</acronym><acronym class="acronym">HTML</acronym> , or extend <span class="classname">Zend_Search_Lucene_Document_Html</span> class and redefine <span class="methodname">applyColour($stringToHighlight, $colour)</span> method used as a default highlighting callback. <a href="#fnid3" name="fn3"><sup>[3]</sup></a> <acronym class="acronym">HTML</acronym><acronym class="acronym">XHTML</acronym>
                    </p>
                    <p class="para">
                        <a href="zend.view.helpers.html" class="link">View helpers</a> also can be used as callbacks in context of view script:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$doc</span>-&gt;<span style="color: #006600;">highlightExtended</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'word1 word2 word3...'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$this</span>, <span style="color: #ff0000;">'myViewHelper'</span><span style="color: #66cc66;">)</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        The result of highlighting operation is retrieved by <code class="code">Zend_Search_Lucene_Document_Html-&gt;getHTML()</code> method.
                    </p>
                    <blockquote>
                        <p>
                            <b class="note">Note</b>: Highlighting is performed in terms of current analyzer. So all forms of the word(s) recognized by analyzer are highlighted.<br>
                            E.g. if current analyzer is case insensitive and we request to highlight 'text' word, then 'text', 'Text', 'TEXT' and other case combinations will be highlighted.<br>
                            In the same way, if current analyzer supports stemming and we request to highlight 'indexed', then 'index', 'indexing', 'indices' and other word forms will be highlighted.<br>
                            On the other hand, if word is skipped by current analyzer (e.g. if short words filter is applied to the analyzer), then nothing will be highlighted.<br>
                        </p>
                    </blockquote>
                    <p class="para">
                        The second option is to use <code class="code">Zend_Search_Lucene_Search_Query-&gt;highlightMatches(string $inputHTML[, $defaultEncoding = 'UTF-8'[, Zend_Search_Lucene_Search_Highlighter_Interface $highlighter]])</code> method:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$query</span> = Zend_Search_Lucene_Search_QueryParser::<span style="color: #006600;">parse</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$queryStr</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$highlightedHTML</span> = <span style="color: #0000ff;">$query</span>-&gt;<span style="color: #006600;">highlightMatches</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$sourceHTML</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        Optional second parameter is a default <acronym class="acronym">HTML</acronym> document encoding. It's used if encoding is not specified using Content-type HTTP-EQUIV meta tag.
                    </p>
                    <p class="para">
                        Optional third parameter is a highlighter object which has to implement <span class="classname">Zend_Search_Lucene_Search_Highlighter_Interface</span> interface:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #000000; font-weight: bold;">interface</span> Zend_Search_Lucene_Search_Highlighter_Interface
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">/**</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;* Set document for highlighting.</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;*</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;* @param Zend_Search_Lucene_Document_Html $document</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;*/</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> setDocument<span style="color: #66cc66;">(</span>Zend_Search_Lucene_Document_Html <span style="color: #0000ff;">$document</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">/**</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;* Get document for highlighting.</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;*</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;* @return Zend_Search_Lucene_Document_Html $document</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;*/</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getDocument<span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">/**</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;* Highlight specified words (method is invoked once per subquery)</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;*</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;* @param string|array $words&nbsp; Words to highlight. They could be</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;organized using the array or string.</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">&nbsp; &nbsp; &nbsp;*/</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> highlight<span style="color: #66cc66;">(</span><span style="color: #0000ff;">$words</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        Where <span class="classname">Zend_Search_Lucene_Document_Html</span> object is an object constructed from the source <acronym class="acronym">HTML</acronym> provided to the <span class="classname">Zend_Search_Lucene_Search_Query-&gt;highlightMatches()</span> method.
                    </p>
                    <p class="para">
                        If <var class="varname">$highlighter</var> parameter is omitted, then <span class="classname">Zend_Search_Lucene_Search_Highlighter_Default</span> object is instantiated and used.
                    </p>
                    <p class="para">
                        Highlighter <span class="methodname">highlight()</span> method is invoked once per subquery, so it has an ability to differentiate highlighting for them.
                    </p>
                    <p class="para">
                        Actually, default highlighter does this walking through predefined color table. So you can implement your own highlighter or just extend the default and redefine color table.
                    </p>
                    <p class="para">
                        <code class="code">Zend_Search_Lucene_Search_Query-&gt;htmlFragmentHighlightMatches()</code> has similar behavior. The only difference is that it takes as an input and returns <acronym class="acronym">HTML</acronym> fragment without &lt;&gt;HTML&gt;, &lt;HEAD&gt;, &lt;BODY&gt; tags. Nevertheless, fragment is automatically transformed to valid <acronym class="acronym">XHTML</acronym>.
                    </p>
                </div>
                <div class="footnote">
                    <a name="fnid1" href="#fn1"><sup>[1]</sup></a> <span class="para footnote">Returned hits are still ordered by score or by the specified order, if given.</span>
                </div>
                <div class="footnote">
                    <a name="fnid2" href="#fn2"><sup>[2]</sup></a> <span class="para footnote">The first is an fragment for highlighting and others are callback behavior dependent. Returned value is a highlighted fragment.</span>
                </div>
                <div class="footnote">
                    <a name="fnid3" href="#fn3"><sup>[3]</sup></a> <span class="para footnote">In both cases returned is automatically transformed into valid .</span>
                </div>
            </div>
            <nav>
    <ul class="page-nav hidden-print">
        <li class="page-nav__item"><a rel="prev" class="page-nav__link page-nav__link--prev" href="zend.search.lucene.index-creation.html">
                <i class="fa fa-chevron-left"></i> Previous
            </a></li>
        <li class="page-nav__item"><a rel="next" class="page-nav__link page-nav__link--next" href="zend.search.lucene.query-language.html">
                Next <i class="fa fa-chevron-right"></i>
            </a></li>
    </ul>
</nav></div>
<div class="col-md-3 col-xs-12 sidebar">
<div class="subnavigation"><div class="component-selector">
<h5 class="component-selector__subtitle">Version 1.12</h5></div><h4 class="subnavigation__title"><a href="zend.search.lucene.html">Zend_Search_Lucene</a></h4><ul class="subnavigation__list">
                
                
                
                
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.overview.html">Overview</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.index-creation.html">Building Indexes</a>
                </li>
                <li class="subnavigation__list-item subnavigation__list-item--active">
                    <a class="subnavigation__link" href="zend.search.lucene.searching.html">Searching an Index</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.query-language.html">Query Language</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.query-api.html">Query Construction API</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.charset.html">Character Set</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.extending.html">Extensibility</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.java-lucene.html">Interoperating with Java Lucene</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.advanced.html">Advanced</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.search.lucene.best-practice.html">Best Practices</a>
                </li>
            </ul></div></div>

    </div>
</div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p> 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://framework.zend.com/js/scripts-9871b49c70.js"></script>
</body>
</html>
