<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
    Using Different Transports - Zend_Mail &ndash; Documentation of ZF1 - Zend Framework
</title>
    <link rel="stylesheet" href="https://froschdesign.github.io/zend-documentation-showcase/css/styles.css">
    <link rel="stylesheet" href="https://froschdesign.github.io/zf1-documentation/css/main.css">
</head>
<body id="page-top">
<div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="https://docs.zendframework.com/tutorials/img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<header class="header">
    <div class="container">
        <div class="row">
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation
                    <small class="header__subtitle">ZF1</small>
                </h1>
            </div>
        </div>
    </div>
</header>
<div class="container">
    <div class="row">
        
    
<div class="col-md-9 col-xs-12 content" role="main"><p class="alert alert-warning" role="alert">
    <strong>Caution:</strong> The documentation you are viewing is
    for an older version of Zend Framework.<br>
    You can find the documentation of the current version at:
    <br>
    <a href="https://docs.zendframework.com/">
        https://docs.zendframework.com/    </a>
</p>
            <div id="zend.mail.different-transports" class="section">
                <div class="info">
                    <h1 class="title">
                        Using Different Transports
                    </h1>
                </div>
                <p class="para">
                    In case you want to send different e-mails through different connections, you can also pass the transport object directly to <span class="methodname">send()</span> without a prior call to <span class="methodname">setDefaultTransport()</span>. The passed object will override the default transport for the actual <span class="methodname">send()</span> request.
                </p>
                <div class="example">
                    <div class="info">
                        <p>
                            <b>Example #1 Using Different Transports</b>
                        </p>
                    </div>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail<span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">// build message...</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$tr1</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail_Transport_Smtp<span style="color: #66cc66;">(</span><span style="color: #ff0000;">'server@example.com'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$tr2</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail_Transport_Smtp<span style="color: #66cc66;">(</span><span style="color: #ff0000;">'other_server@example.com'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">send</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$tr1</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">send</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$tr2</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">send</span><span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;&nbsp; <span style="color: #808080; font-style: italic;">// use default again</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
                <blockquote>
                    <p>
                        <b class="note">Note</b>: <span class="info"><b>Additional transports</b><br></span> Additional transports can be written by implementing <span class="classname">Zend_Mail_Transport_Interface</span>.<br>
                    </p>
                </blockquote>
                <div class="section" id="zend.mail.file-transport">
                    <div class="info">
                        <h2>
                            Using File Transport
                        </h2>
                    </div>
                    <p class="para">
                        <span class="classname">Zend_Mail_Transport_File</span> is useful in a development environment or for testing purposes. Instead of sending any real emails it simply dumps the email's body and headers to a file in the filesystem. Like the other transports, it may be configured using <span class="classname">Zend_Application_Resource_Mail</span>, or by passing an instance to the <span class="methodname">send()</span> method of a <span class="classname">Zend_Mail</span> instance.
                    </p>
                    <p class="para">
                        The transport has two optional parameters that can be passed to the constructor or via <span class="methodname">setOptions()</span> method. The <span class="property">path</span> option specifies the base path where new files are saved. If nothing is set, the transport uses the default system directory for temporary files. The second parameter, <span class="property">callback</span>, defines what PHP callback should be used to generate a filename. As an example, assume we need to use the recipient's email plus some hash as the filename:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #000000; font-weight: bold;">function</span> recipientFilename<span style="color: #66cc66;">(</span><span style="color: #0000ff;">$transport</span><span style="color: #66cc66;">)</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #b1b100;">return</span> <span style="color: #0000ff;">$transport</span>-&gt;<span style="color: #006600;">recipients</span> . <span style="color: #ff0000;">'_'</span> . <a href="http://www.php.net/mt_rand"><span style="color: #000066;">mt_rand</span></a><span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span> . <span style="color: #ff0000;">'.tmp'</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail<span style="color: #66cc66;">(</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">addTo</span><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'somebody@example.com'</span>, <span style="color: #ff0000;">'Some Recipient'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #808080; font-style: italic;">// build message...</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$tr</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail_Transport_File<span style="color: #66cc66;">(</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">(</span><span style="color: #ff0000;">'callback'</span> =&gt; <span style="color: #ff0000;">'recipientFilename'</span><span style="color: #66cc66;">)</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">send</span><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$tr</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        The resulting file will be something like <var class="filename">somebody@example.com_1493362665.tmp</var>
                    </p>
                    <blockquote>
                        <p>
                            <b class="note">Note</b>: <span class="info"><b>Include randomness in filename generation</b><br></span> When generating filenames, you should inject some sort of randomness into the generation to ensure that the filenames are unique. This is especially important on servers where you may expect high load, as it will ensure that despite a number of requests coming in during the same second or millisecond, the filename will still be unique.<br>
                        </p>
                    </blockquote>
                </div>
            </div>
            <nav>
    <ul class="page-nav hidden-print">
        <li class="page-nav__item"><a rel="prev" class="page-nav__link page-nav__link--prev" href="zend.mail.multiple-emails.html">
                <i class="fa fa-chevron-left"></i> Previous
            </a></li>
        <li class="page-nav__item"><a rel="next" class="page-nav__link page-nav__link--next" href="zend.mail.html-mails.html">
                Next <i class="fa fa-chevron-right"></i>
            </a></li>
    </ul>
</nav></div>
<div class="col-md-3 col-xs-12 sidebar">
<div class="subnavigation"><div class="component-selector">
<h5 class="component-selector__subtitle">Version 1.12</h5></div><h4 class="subnavigation__title"><a href="zend.mail.html">Zend_Mail</a></h4><ul class="subnavigation__list">
                
                
                
                
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.introduction.html">Introduction</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.sending.html">Sending via SMTP</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.multiple-emails.html">Sending Multiple Mails per SMTP Connection</a>
                </li>
                <li class="subnavigation__list-item subnavigation__list-item--active">
                    <a class="subnavigation__link" href="zend.mail.different-transports.html">Using Different Transports</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.html-mails.html">HTML E-Mail</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.attachments.html">Attachments</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.adding-recipients.html">Adding Recipients</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.boundary.html">Controlling the MIME Boundary</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.additional-headers.html">Additional Headers</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.character-sets.html">Character Sets</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.encoding.html">Encoding</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.smtp-authentication.html">SMTP Authentication</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.smtp-secure.html">Securing SMTP Transport</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="zend.mail.read.html">Reading Mail Messages</a>
                </li>
            </ul></div></div>

    </div>
</div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>Â© 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://framework.zend.com/js/scripts-9871b49c70.js"></script>
</body>
</html>
