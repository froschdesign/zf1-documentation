<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
    Managing User Sessions In ZF - Getting Started with Zend_Session, Zend_Auth, and Zend_Acl &ndash; Documentation of ZF1 - Zend Framework
</title>
    <link rel="stylesheet" href="https://froschdesign.github.io/zend-documentation-showcase/css/styles.css">
    <link rel="stylesheet" href="https://froschdesign.github.io/zf1-documentation/css/main.css">
</head>
<body id="page-top">
<div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="https://docs.zendframework.com/tutorials/img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<header class="header">
    <div class="container">
        <div class="row">
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation
                    <small class="header__subtitle">ZF1</small>
                </h1>
            </div>
        </div>
    </div>
</header>
<div class="container">
    <div class="row">
        
    
<div class="col-md-9 col-xs-12 content" role="main"><p class="alert alert-warning" role="alert">
    <strong>Caution:</strong> The documentation you are viewing is
    for an older version of Zend Framework.<br>
    You can find the documentation of the current version at:
    <br>
    <a href="https://docs.zendframework.com/">
        https://docs.zendframework.com/    </a>
</p>
            <div id="learning.multiuser.sessions" class="section">
                <div class="info">
                    <h1 class="title">
                        Managing User Sessions In ZF
                    </h1>
                </div>
                <div class="section" id="learning.multiuser.sessions.intro">
                    <div class="info">
                        <h2>
                            Introduction to Sessions
                        </h2>
                    </div>
                    <p class="para">
                        The success of the web is deeply rooted in the protocol that drives the web: <acronym class="acronym">HTTP</acronym>. <acronym class="acronym">HTTP</acronym> over TCP is by its very nature stateless, which means that inherently the web is also stateless. While this very aspect is one of the dominating factors for why the web has become such a popular medium, it also causes an interesting problem for developers that want to use the web as an application platform.
                    </p>
                    <p class="para">
                        The act of interacting with a web application is typically defined by the sum of all requests sent to a web server. Since there can be many consumers being served simultaneously, the application must decide which requests belong to which consumer. These requests are typically known as a "session".
                    </p>
                    <p class="para">
                        In <acronym class="acronym">PHP</acronym>, the session problem is solved by the session extension which utilizes some state tracking, typically cookies, and some form of local storage which is exposed via the $_SESSION superglobal. In Zend Framework, the component <span class="classname">Zend_Session</span> adds value to the <acronym class="acronym">PHP</acronym> session extension making it easier to use and depend on inside object-oriented applications.
                    </p>
                </div>
                <div class="section" id="learning.multiuser.sessions.basic-usage">
                    <div class="info">
                        <h2>
                            Basic Usage of Zend_Session
                        </h2>
                    </div>
                    <p class="para">
                        The <span class="classname">Zend_Session</span> component is both a session manager as well as an <acronym class="acronym">API</acronym> for storing data into a session object for long-term persistence. The <span class="classname">Zend_Session</span> <acronym class="acronym">API</acronym> is for managing the options and behavior of a session, like options, starting and stopping a session, whereas <span class="classname">Zend_Session_Namespace</span> is the actual object used to store data.
                    </p>
                    <p class="para">
                        While its generally good practice to start a session inside a bootstrap process, this is generally not necessary as all sessions will be automatically started upon the first creation of a <span class="classname">Zend_Session_Namespace</span> object.
                    </p>
                    <p class="para">
                        <span class="classname">Zend_Application</span> is capable of configuring <span class="classname">Zend_Session</span> for you as part of the <span class="classname">Zend_Application_Resource</span> system. To use this, assuming your project uses <span class="classname">Zend_Application</span> to bootstrap, you would add the following code to your application.ini file:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.save_path = APPLICATION_PATH <span style="color: #ff0000;">"/../data/session"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.use_only_cookies = <span style="color: #000000; font-weight: bold;">true</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.remember_me_seconds = <span style="color: #cc66cc;">864000</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        As you can see, the options passed in are the same options that you'd expect to find in the ext/session extension in <acronym class="acronym">PHP</acronym>. Those options setup the path to the session files where data will be stored within the project. Since <acronym class="acronym">INI</acronym> files can additionally use constants, the above will use the APPLICATION_PATH constant and relatively point to a data session directory.
                    </p>
                    <p class="para">
                        Most Zend Framework components that use sessions need nothing more to use <span class="classname">Zend_Session</span>. At this point, you an either use a component that consumes <span class="classname">Zend_Session</span>, or start storing your own data inside a session with <span class="classname">Zend_Session_Namespace</span>.
                    </p>
                    <p class="para">
                        <span class="classname">Zend_Session_Namespace</span> is a simple class that proxies data via an easy to use <acronym class="acronym">API</acronym> into the <span class="classname">Zend_Session</span> managed $_SESSION superglobal. The reason it is called <span class="classname">Zend_Session_Namespace</span> is that it effectively namespaces the data inside $_SESSION, thus allowing multiple components and objects to safely store and retrieve data. In the following code, we'll explore how to build a simple session incrementing counter, starting at 1000 and resetting itself after 1999.
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #0000ff;">$mysession</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Session_Namespace<span style="color: #66cc66;">(</span><span style="color: #ff0000;">'mysession'</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #b1b100;">if</span> <span style="color: #66cc66;">(</span>!<a href="http://www.php.net/isset"><span style="color: #000066;">isset</span></a><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$mysession</span>-&gt;<span style="color: #006600;">counter</span><span style="color: #66cc66;">)</span><span style="color: #66cc66;">)</span> <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #0000ff;">$mysession</span>-&gt;<span style="color: #006600;">counter</span> = <span style="color: #cc66cc;">1000</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <span style="color: #0000ff;">$mysession</span>-&gt;<span style="color: #006600;">counter</span>++;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #b1b100;">if</span> <span style="color: #66cc66;">(</span><span style="color: #0000ff;">$mysession</span>-&gt;<span style="color: #006600;">counter</span> &gt; <span style="color: #cc66cc;">1999</span><span style="color: #66cc66;">)</span> <span style="color: #66cc66;">{</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            &nbsp; &nbsp; <a href="http://www.php.net/unset"><span style="color: #000066;">unset</span></a><span style="color: #66cc66;">(</span><span style="color: #0000ff;">$mysession</span>-&gt;<span style="color: #006600;">counter</span><span style="color: #66cc66;">)</span>;
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            <span style="color: #66cc66;">}</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <p class="para">
                        As you can see above, the session namespace object uses the magic __get, __set, __isset, and __unset to allow you to seamlessly and fluently interact with the session. The information stored in the above example is stored at $_SESSION['mysession']['counter'].
                    </p>
                </div>
                <div class="section" id="learning.multiuser.sessions.advanced-usage">
                    <div class="info">
                        <h2>
                            Advanced Usage of Zend_Session
                        </h2>
                    </div>
                    <p class="para">
                        Additionally, if you wanted to use the DbTable save handler for <span class="classname">Zend_Session</span>, you'd add the following code to your application.ini:
                    </p>
                    <div class="programlisting php">
                        <div class="phpcode">
                            <div class="php" style="font-family: monospace;">
                                <ol>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.<span style="color: #000000; font-weight: bold;">class</span> = <span style="color: #ff0000;">"Zend_Session_SaveHandler_DbTable"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.name = <span style="color: #ff0000;">"session"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.primary.<a href="http://www.php.net/session_id"><span style="color: #000066;">session_id</span></a> = <span style="color: #ff0000;">"session_id"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.primary.save_path = <span style="color: #ff0000;">"save_path"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.primary.name = <span style="color: #ff0000;">"name"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.primaryAssignment.sessionId = <span style="color: #ff0000;">"sessionId"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.primaryAssignment.sessionSavePath = <span style="color: #ff0000;">"sessionSavePath"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.primaryAssignment.sessionName = <span style="color: #ff0000;">"sessionName"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.modifiedColumn = <span style="color: #ff0000;">"modified"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.dataColumn = <span style="color: #ff0000;">"session_data"</span>
                                        </div>
                                    </li>
                                    <li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;">
                                        <div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">
                                            resources.session.saveHandler.options.lifetimeColumn = <span style="color: #ff0000;">"lifetime"</span>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <nav>
    <ul class="page-nav hidden-print">
        <li class="page-nav__item"><a rel="prev" class="page-nav__link page-nav__link--prev" href="learning.multiuser.intro.html">
                <i class="fa fa-chevron-left"></i> Previous
            </a></li>
        <li class="page-nav__item"><a rel="next" class="page-nav__link page-nav__link--next" href="learning.multiuser.authentication.html">
                Next <i class="fa fa-chevron-right"></i>
            </a></li>
    </ul>
</nav></div>
<div class="col-md-3 col-xs-12 sidebar">
<div class="subnavigation"><div class="component-selector">
<h5 class="component-selector__subtitle">Version 1.12</h5></div><h4 class="subnavigation__title"><a href="learning.multiuser.html">Getting Started with Zend_Session, Zend_Auth, and Zend_Acl</a></h4><ul class="subnavigation__list">
                
                
                
                
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="learning.multiuser.intro.html">Building Multi-User Applications With Zend Framework</a>
                </li>
                <li class="subnavigation__list-item subnavigation__list-item--active">
                    <a class="subnavigation__link" href="learning.multiuser.sessions.html">Managing User Sessions In ZF</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="learning.multiuser.authentication.html">Authenticating Users in Zend Framework</a>
                </li>
                <li class="subnavigation__list-item">
                    <a class="subnavigation__link" href="learning.multiuser.authorization.html">Building an Authorization System in Zend Framework</a>
                </li>
            </ul></div></div>

    </div>
</div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>© 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://framework.zend.com/js/scripts-9871b49c70.js"></script>
</body>
</html>
